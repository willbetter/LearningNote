# å†™åœ¨å‰é¢çš„
> åœ¨iOSåŸç”Ÿåº”ç”¨ä¸­åµŒå…¥çš„H5ç½‘é¡µ, å¦‚æœH5åŒ…å«æ”¯ä»˜åŠŸèƒ½, webViewéœ€è¦å¯¹`alipay://`, `wexin://`ä¸¤ä¸ªschemeåšç³»ç»Ÿçº§çš„è½¬å‘, åŸç”Ÿåº”ç”¨æ˜¯å¯ä»¥æ­£å¸¸æ‰“å¼€å¾®ä¿¡æˆ–è€…æ”¯ä»˜å®è¿›è¡Œæ”¯ä»˜çš„, ä½†æ˜¯æ”¯ä»˜å®Œæˆä¹‹åå¹¶ä¸èƒ½å¤Ÿæ­£å¸¸çš„å›æ‰åˆ°åŸç”Ÿçš„Appä¸­. 

å¯¹ç”¨æˆ·æ¥è¯´, åœ¨Appä¸­æ”¯ä»˜, æœ€ç»ˆå›æ‰åˆ°safriaæµè§ˆå™¨ä¸­çš„ç”¨æˆ·ä½“éªŒæå·®, äº‹å®ä¸Š, æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›å°æŠ€å·§æ¥è®©æ”¯ä»˜å®å’Œå¾®ä¿¡å›æ‰åˆ°åŸç”Ÿçš„Appä¸­. 

# æ”¯ä»˜å®æ”¯ä»˜å›æ‰é—®é¢˜
æ”¯ä»˜å®å›æ‰é—®é¢˜å¤„ç†èµ·æ¥ç›¸å¯¹ç®€å•. å¦‚ä¸‹ä»£ç æ‰€ç¤ºæ˜¯h5è°ƒèµ·æ”¯ä»˜å®æ”¯ä»˜æ—¶å€™çš„å‚æ•°, æ ¹æ®å‚æ•°åå­—`fromAppUrlScheme`æˆ‘ä»¬çŒœæµ‹, å…¶å€¼åº”è¯¥æ˜¯ç”¨æ¥æ§åˆ¶å›æ‰URIçš„. 

```
alipay://alipayclient/?{"requestType":"SafePay","fromAppUrlScheme":"alipays","dataString":"h5_route_token=\"RZ114oCHb6whkNX9aJ8yTIbiXeOPJOmobilecashierRZ11\"&is_h5_route=\"true\""}
```

æˆ‘ä»¬å°†å…¶å€¼`alipays`æ”¹æˆæˆ‘ä»¬è‡ªå·±çš„Appä¸­é…ç½®è¿‡çš„scheme, å‘ç°å¯ä»¥æ­£å¸¸å›æ‰å›åŸç”ŸApp. é—®é¢˜è§£å†³ âœŒğŸ».

# å¾®ä¿¡æ”¯ä»˜å›æ‰é—®é¢˜
æœ‰äº†è§£å†³æ”¯ä»˜å®æ”¯ä»˜å›æ‰çš„ç»éªŒ, æˆ‘ä»¬ä½¿ç”¨ç›¸ä¼¼çš„æ–¹æ³•å…ˆæ‹¿åˆ°ç½‘é¡µç«¯å‘èµ·å¾®ä¿¡æ”¯ä»˜çš„è·¯ç”±, å¦‚ä¸‹æ‰€ç¤º:

```
weixin://wap/pay?prepayid%3Dwx13184252063215ee7146ef601943283700&package=1054478582&noncestr=1560422573&sign=f4933e3c7d6a8464d928e54906f7f8fb
```
è¿™é‡Œå¹¶ä¸å­˜åœ¨å…³äºæ”¯ä»˜å›æ‰ç›¸å…³çš„å­—æ®µ, è€Œæ”¯ä»˜å®Œæˆå, å¾®ä¿¡èƒ½å¤Ÿè·³è½¬åˆ°æµè§ˆå™¨å¹¶æ‰“å¼€æˆ‘ä»¬é…ç½®åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°çš„æ”¯ä»˜ç»“æœç½‘é¡µ. å› æ­¤çŒœæµ‹å¾®ä¿¡æ”¯ä»˜çš„å›æ‰åœ°å€å¯èƒ½æ˜¯å¾®ä¿¡ä»å¾®ä¿¡æœåŠ¡å™¨è‡ªåŠ¨è·å–çš„.

å®é™…ä¸Šè§£å†³é—®é¢˜è¿‡ç¨‹ä¸­, æˆ‘ä»¬æ‹¿åˆ°äº†å¾®ä¿¡SDKæ”¯ä»˜è·³è½¬çš„URI, å…¶ä¸­åŒ…å«äº†å¾®ä¿¡æ”¯ä»˜å›æ‰ç›¸å…³çš„ä¿¡æ¯, æˆ‘ä»¬è¯•å›¾å°†ç›¸åŒçš„å‚æ•°æ‹¼æ¥åˆ°ç½‘é¡µå‘èµ·æ”¯ä»˜çš„URIä¸Š, ä¸ç®¡ç”¨; æˆ‘ä»¬è¯•å›¾å°†H5æ”¯ä»˜å‚æ•°æ‹¼æˆSDKæ”¯ä»˜çš„æ–¹å¼è°ƒèµ·å¾®ä¿¡, åŒæ ·ä¸ç®¡ç”¨. 

æœ€ç»ˆæˆ‘ä»¬ä»ç½‘ä¸Šæ‰¾åˆ°äº†ä¸€ç§è§£å†³æ–¹æ¡ˆ(ä¸è®°å¾—ä»å“ªé‡Œçœ‹åˆ°äº†è§£å†³æ–¹æ¡ˆ, å¿˜è®°äº†).

**è§£å†³**

H5å¾®ä¿¡æ”¯ä»˜ä¸­, å¾®ä¿¡URIè½¬å‘è¯·æ±‚ä¹‹å‰, éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨é…ç½®Requestçš„è¯·æ±‚å¤´ä¿¡æ¯`Referer`, æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œåšæ–‡ç« . åŸæœ¬Refererçš„å€¼æ˜¯æˆ‘ä»¬é…ç½®åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°çš„æ”¯ä»˜url(ä¹Ÿå°±æ˜¯å›æ‰åˆ°æµè§ˆå™¨ä¸­çš„url), æˆ‘ä»¬åªéœ€è¦å°†Refererçš„å€¼ç¨ä½œä¿®æ”¹å³å¯.

å‡å¦‚æˆ‘ä»¬é…ç½®åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°çš„æ”¯ä»˜urlæ˜¯`https://baidu.com/baidupay`, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†Refererçš„å€¼ä¿®æ”¹ä¸º`xxx.baidu.com://`å³å¯, `xxx`ä¸é™é•¿åº¦å’Œå†…å®¹, å¯ä»¥æ˜¯ä»»æ„çš„å†…å®¹, å¯ä»¥æ˜¯æ²¡æœ‰æ³¨å†Œè¿‡çš„å­åŸŸå; ç„¶åæˆ‘ä»¬éœ€è¦åœ¨`Target>Info>URL Types`ä¸­é…ç½®ç›¸åŒçš„`URL Scheme`å³å¯.(å‡å¦‚æ”¯ä»˜åŸŸåæ˜¯`https://images.baidu.com/baidupay`, é‚£ä¹ˆRefererå€¼åº”è¯¥æ˜¯`xxx.images.baidu.com://`, é…ç½®çš„Refererçš„å€¼ä¸€å®šè¦æ˜¯æ”¯ä»˜URlçš„å€¼åŸŸå).

è‡³æ­¤, é—®é¢˜è§£å†³! âœŒğŸ»













