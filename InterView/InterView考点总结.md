## 设计模式相关

MVC， MVP， MVVM-RxSwift等App架构。

7个设计原则、单例模式、工厂模式、代理模式、适配器、观察者、桥接、组合、装饰、责任链、中介者、状态、策略、模板方法等设计模式。









APP优化方案：

卡顿优化

CPU和GPU： CPU负责对象的创建、对象属性调整、布局计算、文本计算和排版、图片的解码和转换、图像的绘制。GPU负责纹理渲染。

CPU优化：

1. 使用轻量级对象，用不到事件处理则使用CALayer。
2. 不要频繁调整UIView属性。
3. 控制线程最大并发量。
4. 图片size大小控制一下。
5. 耗时操作放在子线程中：图片解码，文本计算。

GPU优化：

1. 避免同时使用大量图片。
2. 尽量减少视图的层级和数量。
3. 较少透明的视图，尽量使用不透明的视图。
4. 尽量避免出现离屏渲染。

离屏渲染设计上下文切换，开辟新的缓冲区造成耗时。光栅化、遮罩、圆角、阴影会导致离屏渲染。



耗电优化

主要用电大户：CPU、网络请求、定位、图像、不停的IO操作。

1. 不要频繁的进行IO操作，如果是少量的数据，则统一在APP退出时候统一写数据。
2. 减少网络请求，数据缓存，获取到定位后马上关闭定位。
3. 优化持续使用CPU的代码。



APP启动优化

App启动过程：

1. dyld：通过dyld加载递归加载依赖的动态库、动态链接。
2. runtime：class load， category load，加载可执行文件和动态库到内存中，被runtime管理。
3. main：调用didFinishLaunch方法，这里尽可能少的代码，尽可能将代码放在异步线程中去。

![](../resourse/images/sidjfasinaskdfalsdfueifk.png)

优化：

dyld阶段：尽可能少使用动态库，合并动态库。较少类分类数量，定期清理没用的类和分类和方法。

runtime阶段：尽可能少的使用load方法。

main阶段：极可能将一些操作延迟，按需加载。



安装包瘦身

1. 清理没用代码。
2. 图片等资源进行压缩。
3. 开启编译器优化，bitcode，瘦身等。
4. AppCode检测未使用代码并删除掉。
5. 检查占用体积比较大的三方库，尽可能少使用第三方库，如果只使用到一个三方库很小的功能，尝试自己写。





